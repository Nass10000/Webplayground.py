{% extends 'core/base.html' %}
{% load static %}
{% block title %}Introducir nueva contraseña{% endblock %}
{% block content %}
<style>.errorlist{color:red;}</style>
<main role="main">
  <div class="container">
    <div class="row mt-3">
      <div class="col-md-9 mx-auto mb-5">
        {% if validlink %}
          <form action="" method="post">{% csrf_token %}
            <h3 class="mb-4">Introducir nueva contraseña</h3>
            <p>Por favor, introduce tu nueva contraseña dos veces para verificar que la has escrito correctamente.</p>
            {% if form.new_password1.errors %}
              <div class="text-danger">{{ form.new_password1.errors }}</div>
            {% endif %}
            <p>
              <input type="password" name="new_password1" required id="id_new_password1" 
                     class="form-control mb-2" placeholder="Nueva contraseña"/>
            </p>
            {% if form.new_password2.errors %}
              <div class="text-danger">{{ form.new_password2.errors }}</div>
            {% endif %}
            <p>
              <input type="password" name="new_password2" required id="id_new_password2" 
                     class="form-control mb-2" placeholder="Confirmar nueva contraseña"/>
            </p>
            <p><input type="submit" class="btn btn-primary btn-block" value="Cambiar contraseña"></p>
          </form>
        {% else %}
          <div class="alert alert-danger">
            <h4>Error</h4>
            <p>El enlace de recuperación no es válido. Puede que ya haya sido usado o haya caducado.</p>
            <a href="{% url 'password_reset' %}" class="btn btn-primary">Solicitar nueva recuperación</a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</main>
{% endblock %}
